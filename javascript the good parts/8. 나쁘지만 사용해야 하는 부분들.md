# Javascript The Good Parts

## 부록 A. 나쁘지만 사용해야 하는 부분들

### 1. 전역 변수

<p>
    자바스크립트의 나쁜 점들 중에서 가장 나쁜 점은 언어가 전역 변수에 기반하고 있다는 것이다. 전역 변수는 모든 유효범위에서 보이는 변수로, 프로그램이 점점 커짐에 따라 다루기가 까다로워지며, 프로그램의 신뢰성을 저하시킨다.
</p>

<p>
    전역 변수는 같은 프로그램 내에 있는 하위 프로그램이 독립적으로 실행되는 것을 어렵게 만든다. 하위 프로그램들이 같은 이름의 전역 변수들을 공유하면, 각각 서로를 방해하고 오류가 발생하기 쉬우며, 어디가 잘못됐는지 찾기가 어려워진다.
</p>

<p>
    많은 언어에 전역 변수가 있지만, 유독 자바스크립트에서 문제가 되는 것은 전역 변수가 필요한 경우에만 사용할 수 없기 때문이다. 자바스크립트는 링커가 없다. 따라서 모든 컴파일 단위는 하나의 공용 전역 객체에 로딩된다.
</p>

#### 전역 변수를 정의하는 방법

- 어떠한 함수에도 속하지 않는 위치에 var 문을 사용
- 전역 객체에 직접적으로 속성을 추가
- 변수를 선언 없이 사용

### 2. 유효범위(Scope)

<p>
    자바스크립트는 블록 구문을 사용하지만, 블록 유효범위를 제공하지 않는다. 즉, 블록 내에서 선언한 변수는 블록을 포함하는 함수 내부 모든 곳에서 볼 수 있다. 따라서 변수가 처음 사용되는 지점에서 선언하는 것보단, 함수의 첫 부분에서 선언하는 것이 좋다.
</p>

### 3. 세미콜론 삽입

<p>
    자바스크립트에는 자동으로 세미콜론을 삽입하여 잘못된 프로그램을 교정하려는 메커니즘이 있다. 때때로 세미콜론이 원하지 않는 곳에 자동 삽입되어 오류가 발생할 수 있어 이러한 메커니즘에 의존해서는 안된다.
</p>

### 4. 예약어

<p>
    예약어들은 변수나 매개 변수 이름으로 사용할 수 없다. 예약어가 객체 리터럴에서 속성 이름으로 사용될 때는 따옴표로 묶어줘야 하며, 대괄호 표기법으로 사용해야 한다.
</p>

### 5. 유니코드

<p>
    자바스크립트는 유니코드가 최대 65536자를 갖는 시절에 설계 되었다. 유니코드 상으로는 16비트 글자 한 쌍이 한 글자이다. 하지만 자바스크립트는 이러한 한 쌍을 두 개의 글자로 생각한다.
</p>

### 6. typeof

<p>
    typeof 연산자는 피연산자의 타입을 알 수 있게 해주는 문자열을 반환하나, null과 객체를 구분하지 못한다.
</p>

### 7. parseInt

<p>
    parseInt는 문자열을 정수로 바꿔주는 함수이다. 이 함수는 첫 문자부터 변환하다가 숫자가 아닌 문자를 만나게 되면 변환을 멈추며, 변환되지 않은 여분의 텍스트가 무엇인지 알려주지 않는다. 문자열의 첫 번째 문자가 0이면 문자열은 10진수 대신에 8진수로 간주된다. 따라서 '08'과 '09'의 결과값은 9이며, 날짜나 시간을 파싱할 때 문제를 일으킬 수 있다.
</p>

### 8. +

<p>
    + 연산자는 덧셈이나 문자열을 연결한다. 어떤 작업을 할지는 피연산자의 데이터 타입에 따라 결정되며, 두 피연산자가 어떤 타입인지 확인하는 것이 좋다.
</p>

### 9. 부동 소수점

<p>
    이진 부동 소수점 숫자는 소수 부분을 제대로 처리하지 못한다. 이러한 문제는 자바스크립트에서 가장 빈번하게 보고되는 버그이다.
</p>

### 10. NaN

<p>
    NaN은 특별한 값이다. 숫자가 아님에도 typeof는 숫자와 NaN을 구분하지 못한다. 또한 'NaN === NaN'은 거짓을 반환한다. 자바스크립트는 숫자와 NaN을 구분하도록 isNaN이라는 함수를 제공한다.
</p>

### 11. 가짜 배열(Phony Arrays)

<p>
    자바스크립트에서 진정한 배열은 없으며, 성능면에서도 진짜 배열보다 떨어진다. typeof는 배열과 객체를 구분하지 않는다. 따라서 constructor 속성을 확인해야 한다.
</p>

### 12. 거짓인 값들(Falsy Values)

|값|데이터 타입|
|:---|:---|
|0|숫자|
|NaN|숫자|
|빈 문자열|문자열|
|false|불리언|
|null|객체|
|undefined|undefined|

### 13. hasOwnProperty

<p>
    hasOwnProperty는 연산자가 아니라 메소드여서, 이 메소드를 다른 함수나 함수가 아닌 값으로 대체할 수 있다.
</p>

### 14. 객체

<p>
    자바스크립트의 객체는 프로토타입 체인 상의 구성요소들을 불러올 수 있기 때문에 결코 온전히 빈 상태를 가질 수 없다.
</p>
